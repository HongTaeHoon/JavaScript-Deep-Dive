# 13장 스코프

## 13.1 스코프란?

> 식별자 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위

```javascript
var x = "global";

function foo() {
  var x = "local";
  console.log(x); // local
}

foo();
console.log(x); //global
```

- 코드의 가장 바깥 영역와 foo 함수 내부에 같은 이름을 갖는 x변수를 선언하고 x 변수를 참조할 때 다른 결과가 나온다.

- 코드의 가장 바깥 영역에 선언된 x변수는 어디서든 참조할 수 있다.

- foo 함수 내부에서 선언된 x변수는 foo함수 내부에서만 참조할 수 있고 foo 함수 외부에서는 참조할 수 없다.

- 이때 두 개의 x변수는 이름은 동일하지만 스코프가 다른 별개의 변수다.

---

## 13.2 스코프의 종류

### 13.2.1 전역과 전역 스코프

> 전역 : 코드의 가장 바깥 영역

- 전역에 변수를 선언하면 전역 스코프를 갖는 전역 변수가 된다.
- 전역 변수는 어디서든지 참조할 수 있다.

### 13.2.2 지역과 지역 스코프

> 지역 : 함수 몸체 내부

- 지역에 변수를 선언하면 지역 스코프를 갖는 지역 변수가 된다.
- 지역 변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.

---

## 13.3 스코프 체인

> 스코프가 계층적으로 연결된 것

`함수는 전역에서 정의할 수도 있고 함수 몸체 내부에서 정의할 수도 있다. 함수 몸체 내주에서 정의한 함수를 '중첩 함수', 중첩 함수를 포함하는 함수를 '외부함수'라고 한다.`

- 함수는 중첩될 수 있으므로 스코프도 중첩될 수 있다. 스코프가 함수의 중첩에 의해 계층적 구조를 갖는다는 것을 의미한다.

- 변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다. 이를 통해 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조할 수 있다.

---

## 13.4 함수 레벨 스코프

- 대부분의 언어는 함수 몸체 만이 아니라 모든 코드 블록 (if, for, while, try/catch 등) 이 지역 스코프를 만드는데 이러한 특성을 `블록 레벨 스코프`라 한다.

- 자바스크립트의 let, const 키워드로 선언된 변수도 블록 레벨 스코프를 따른다.

- 하지만 var 키워드로 선언된 변수는 오로지 함수의 코드 블록 (함수 몸체) 만을 지역 스코프로 인정한다. 이러한 특성을 `함수 레벨 스코프` 라 한다.

## 13.5 렉시컬 스코프

> 함수를 어디서 정의했는지에 따라 함수의 상위 스코프를 결정하는 방식

- 자바스크립트는 렉시컬 스코프를 따른다
- 함수가 호출된 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다.
